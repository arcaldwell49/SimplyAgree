# Instructions for SimplyAgree Development

## Overview

SimplyAgree is an R package for flexible and robust agreement and reliability analyses. The package is hosted on [CRAN](https://cran.r-project.org/) and actively maintained on GitHub.

- **Package Website**: https://aaroncaldwell.us/SimplyAgree/
- **Bug Reports**: https://github.com/arcaldwell49/SimplyAgree/issues
- **CRAN Page**: https://cran.r-project.org/package=SimplyAgree

## Repository Structure

```
SimplyAgree/
├── R/                  # R source code
├── man/                # Auto-generated documentation (via roxygen2)
├── tests/              # Package tests (testthat)
├── vignettes/          # Package vignettes
├── data/               # Package datasets
├── inst/               # Installed files
├── jamovi/             # jamovi module files
├── docs/               # pkgdown website (auto-generated, see note below)
├── .github/            # GitHub Actions workflows
└── DESCRIPTION         # Package metadata
```

## Important Notes for Reviewers

### Documentation Folder

⚠️ **The `docs/` folder should be IGNORED when reviewing changes.**

The `docs/` folder is auto-generated by pkgdown and deployed to GitHub Pages. It is rebuilt automatically via GitHub Actions on every push to the main/master branch. Manual changes to this folder are not needed and will be overwritten.

### Auto-Generated Files

The following files/folders are auto-generated and typically should not be manually edited:
- `docs/` - pkgdown website
- `man/` - Documentation (generated from roxygen2 comments in R code)
- `NAMESPACE` - Package namespace (generated by roxygen2)

## Development Workflow

### Prerequisites

1. Install R (>= 3.6)
2. Install required development packages:
   ```r
   install.packages(c("devtools", "roxygen2", "testthat", "pkgdown", "rcmdcheck"))
   ```

### Local Development

1. **Clone the repository**
   ```bash
   git clone https://github.com/arcaldwell49/SimplyAgree.git
   cd SimplyAgree
   ```

2. **Install dependencies**
   ```r
   devtools::install_deps(dependencies = TRUE)
   ```

3. **Load the package for development**
   ```r
   devtools::load_all()
   ```

4. **Run tests**
   ```r
   devtools::test()
   ```

5. **Check the package**
   ```r
   devtools::check()
   ```

6. **Build documentation**
   ```r
   devtools::document()
   ```

7. **Build the pkgdown website locally** (optional)
   ```r
   pkgdown::build_site()
   ```

### Making Changes

1. **Code changes**: Edit files in `R/`
2. **Documentation**: Update roxygen2 comments in `R/` files, then run `devtools::document()`
3. **Tests**: Add/modify tests in `tests/testthat/`
4. **Vignettes**: Edit files in `vignettes/`

### Testing

- Run all tests: `devtools::test()`
- Run a specific test file: `testthat::test_file("tests/testthat/test-filename.R")`
- Check package: `devtools::check()` or `rcmdcheck::rcmdcheck()`

The package uses testthat for unit testing. Tests are located in `tests/testthat/`.

### Code Style

Follow standard R package development practices:
- Use roxygen2 for documentation
- Follow the tidyverse style guide when possible
- Write tests for new functionality
- Update NEWS.md for user-facing changes

## Continuous Integration

The repository uses GitHub Actions for CI/CD:

### Workflows

1. **R-CMD-check** (`.github/workflows/R-CMD-check.yaml`)
   - Runs on: Push and pull requests to main/master
   - Platforms: macOS, Windows, Ubuntu
   - Performs: R CMD check to validate package integrity

2. **pkgdown** (`.github/workflows/pkgdown.yaml`)
   - Runs on: Push to main/master, releases, and manual dispatch
   - Builds and deploys documentation website to GitHub Pages
   - Outputs to `docs/` folder (auto-generated)

3. **test-coverage** (`.github/workflows/test-coverage.yaml`)
   - Runs on: Push and pull requests
   - Reports code coverage to Codecov

### CI Best Practices

- All CI checks must pass before merging
- Review CI logs for errors or warnings
- Ensure R CMD check passes without errors, warnings, or notes
- Maintain or improve code coverage with new changes

## Contributing

We welcome contributions! Please see the [Contributing section](README.md#contributing) in the README for guidelines.

### Pull Request Process

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/your-feature`)
3. Make your changes and commit them with clear messages
4. Push to your fork (`git push origin feature/your-feature`)
5. Open a pull request against the main/master branch
6. Ensure all CI checks pass
7. **Remember**: Ignore changes to `docs/` folder when reviewing

### Code of Conduct

This project adheres to a [Code of Conduct](CODE_OF_CONDUCT.md). By participating, you are expected to uphold this code.

## Release Process

Releases are managed by the package maintainer. The typical process includes:

1. Update version in DESCRIPTION
2. Update NEWS.md
3. Run `devtools::check()` and ensure it passes
4. Submit to CRAN (for maintainer only)
5. Create a GitHub release after CRAN acceptance
6. Tag the release with version number

## Package Dependencies

SimplyAgree depends on several R packages (see DESCRIPTION file). Key dependencies include:

- ggplot2 - Plotting
- lme4, nlme - Mixed models
- emmeans - Marginal means
- boot - Bootstrap methods
- dplyr, tidyr - Data manipulation

## Resources

- **R Packages Book**: https://r-pkgs.org/
- **Writing R Extensions**: https://cran.r-project.org/doc/manuals/r-release/R-exts.html
- **roxygen2 Documentation**: https://roxygen2.r-lib.org/
- **testthat Documentation**: https://testthat.r-lib.org/
- **pkgdown Documentation**: https://pkgdown.r-lib.org/

## Getting Help

- **Issues**: Report bugs or request features via [GitHub Issues](https://github.com/arcaldwell49/SimplyAgree/issues)
- **Questions**: Reach out to the maintainer at arcaldwell49@gmail.com
- **Documentation**: Check the [package website](https://aaroncaldwell.us/SimplyAgree/) for vignettes and function documentation

## License

SimplyAgree is licensed under GPL (>= 3). See the LICENSE.md file for details.
