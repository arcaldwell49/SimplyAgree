<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to SimplyAgree • SimplyAgree</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to SimplyAgree">
<meta property="og:description" content="SimplyAgree">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SimplyAgree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_vignette.html">Introduction to SimplyAgree</a>
    </li>
    <li>
      <a href="../articles/reanalysis.html">Re-analysis of an Agreement Study</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_vignette_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to SimplyAgree</h1>
                        <h4 class="author">Aaron R. Caldwell</h4>
            
            <h4 class="date">Last Updated: 2021-05-02</h4>
      
      
      <div class="hidden name"><code>intro_vignette.Rmd</code></div>

    </div>

    
    
<p>The <code>SimplyAgree</code> R package was created to make the process of quantifying measurement agreement, consistency, and reliability. This package expands upon the capabilities of currently available R packages (such as <code>psych</code> and <code>blandr</code>) by 1) providing support for agreement studies that involve multiple observations (<code>agree_test</code> and <code>agree_reps</code> functions) 2) provide robust tests of agreement even in simple studies (<code>shieh_test</code> output from the <code>agree_test</code> function) and 3) a robust set of reliability statistics (<code>reli_stats</code> function).</p>
<p>In this vignette I will shortly demonstrate the implementation of each function and <em>most</em> of the underlying calculations within each function</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">SimplyAgree</span><span class="op">)</span>
<span class="co">#&gt; Registered S3 methods overwritten by 'tibble':</span>
<span class="co">#&gt;   method     from  </span>
<span class="co">#&gt;   format.tbl pillar</span>
<span class="co">#&gt;   print.tbl  pillar</span></code></pre></div>
<div id="simple-agreement" class="section level1">
<h1 class="hasAnchor">
<a href="#simple-agreement" class="anchor"></a>Simple Agreement</h1>
<div id="agree_test" class="section level2">
<h2 class="hasAnchor">
<a href="#agree_test" class="anchor"></a><code>agree_test</code>
</h2>
<p>In the simplest scenario, a study may be conducted to compare one measure (e.g., <code>x</code>) and another (e.g., <code>y</code>). In this scenario each pair of observations (x and y) are <em>independent</em>; meaning that each pair represents one subject/participant. In most cases we have a degree of agreement that we would deem adequate. This may constitute a hypothesis wherein you may believe the agreement between two measurements is within a certain limit (limits of agreement). If this is the goal then the <code>agree_test</code> function is what you need to use in this package.</p>
<p>The data for the two measurements are put into the <code>x</code> and <code>y</code> arguments. If there is a hypothesized limit of agreement then this can be set with the <code>delta</code> argument (this is optional). Next, the limit of agreement can be set with the <code>agree.level</code> and the confidence level (<span class="math inline">\(1-\alpha\)</span>). Once those are set the analysis can be run. Please note, this package has pre-loaded data from the Zou 2013 paper. While data does not conform the assumptions of the test it can be used to test out many of the functions in this package. Since there isn’t an <em>a priori</em> hypothesis I will not declare a <code>delta</code> argument, but I will estimate the 95% confidence intervals for 80% limits of agreement.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a1</span> <span class="op">=</span> <span class="fu"><a href="../reference/agree_test.html">agree_test</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">reps</span><span class="op">$</span><span class="va">x</span>,
                y <span class="op">=</span> <span class="va">reps</span><span class="op">$</span><span class="va">y</span>,
                agree.level <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></code></pre></div>
<p>We can then print the general results. These results include the general parameters of the analysis up top, then the results of the Shieh exact test for agreement (no conclusion is included due to the lack of a <code>delta</code> argument being set). Then the limits of agreement, with confidence limits, are included. Lastly, Lin’s Concordance Correlation Coefficient, another measure of agreement, is also included.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a1</span><span class="op">)</span>
<span class="co">#&gt; Limit of Agreement = 80%</span>
<span class="co">#&gt; alpha = 0.05 | 95 % Confidence Interval</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Shieh TOST Results -###</span>
<span class="co">#&gt; Exact C.I.: [-1.512, 2.3887]</span>
<span class="co">#&gt; Hypothesis Test: No Hypothesis Test</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Bland-Altman Limits of Agreement (LoA) -###</span>
<span class="co">#&gt; Mean Bias: 0.4383333 [-0.166885, 1.043552]</span>
<span class="co">#&gt; Lower LoA: -1.121363 [-1.985285, -0.2574405]</span>
<span class="co">#&gt; Upper LoA: 1.998029 [1.134107, 2.861951]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Concordance Correlation Coefficient (CCC) -###</span>
<span class="co">#&gt; CCC: 0.4791, 95% C.I. [0.1276, 0.7237]</span></code></pre></div>
<p>Next, we can use the generic <code>plot</code> function to produce visualizations of agreement. This includes the Bland-Altman plot (<code>type = 1</code>) and a line-of-identity plot (<code>type = 2</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a1</span>, type <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a1</span>, type <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-4-2.png" width="576"></p>
</div>
<div id="calculations-in-agree_test" class="section level2">
<h2 class="hasAnchor">
<a href="#calculations-in-agree_test" class="anchor"></a>Calculations in <code>agree_test</code>
</h2>
<div id="shiehs-test" class="section level3">
<h3 class="hasAnchor">
<a href="#shiehs-test" class="anchor"></a>Shieh’s test</h3>
<p>The hypothesis test procedure is based on the “exact” approach details by <span class="citation">Shieh (2019)</span>. In this procedure the null hypothesis (not acceptable agreement) is rejected if the extreme lower bound and upper bound are within the proposed agreement limits. The agreement limits (<span class="math inline">\(\hat\theta_{EL} \space and \space \hat\theta_{EU}\)</span>) are calculated as the following:</p>
<p><span class="math display">\[
\hat\theta_{EL,EU} = \bar{d} \pm \gamma_{1-\alpha}\cdot \frac{S}{\sqrt{N}}
\]</span> wherein <span class="math inline">\(\bar{d}\)</span> is the mean difference between the two methods, <span class="math inline">\(S\)</span> is the standard deviation of the sample, <span class="math inline">\(N\)</span> is the total number of pairs, and _{1-} critical value (which requires a specialized program to estimate).</p>
</div>
<div id="limits-of-agreement" class="section level3">
<h3 class="hasAnchor">
<a href="#limits-of-agreement" class="anchor"></a>Limits of Agreement</h3>
<p>The reported limits of agreement are derived from the work of <span class="citation">Bland and Altman (1986)</span> and <span class="citation">Bland and Altman (1999)</span>.</p>
<p><span class="math display">\[
LoA = \bar{d} \pm t_{1-\alpha/2,N-1} \cdot \sqrt{\left[\frac{1}{N}+\frac{(z_{1-\alpha/2})^{2}}{2 \cdot (N-1)} \right] \cdot S^2}
\]</span> wherein, <span class="math inline">\(t\)</span> is the critical t-value at the given sample size and confidence level, <span class="math inline">\(z\)</span> is the value of the normal distribution at the given alpha level, and <span class="math inline">\(S^2\)</span> is the variance of the difference scores.</p>
</div>
<div id="concordance-correlation-coefficient" class="section level3">
<h3 class="hasAnchor">
<a href="#concordance-correlation-coefficient" class="anchor"></a>Concordance Correlation Coefficient</h3>
<p>The CCC was calculated as outlined by <span class="citation">Lin (1989)</span> (with later corrections).</p>
<p><span class="math display">\[
\hat\rho_c = \frac{2 \cdot s_{xy}} {s_x^2 + s_y^2+(\bar x-\bar y)^2}
\]</span> where <span class="math inline">\(s_{xy}\)</span> is the covariance, <span class="math inline">\(s_x^2\)</span> and <span class="math inline">\(s_y^2\)</span> are the variances of x and y respectively, and <span class="math inline">\((\bar x-\bar y)\)</span> is the difference in the means of x &amp; y.</p>
</div>
</div>
</div>
<div id="repeated-measures-agreement" class="section level1">
<h1 class="hasAnchor">
<a href="#repeated-measures-agreement" class="anchor"></a>Repeated Measures Agreement</h1>
<p>In many cases there are multiple measurements taken within subjects when comparing two measurements tools. In some cases the true underlying value will not be expected to vary (i.e., replicates; <code>agree_reps</code>), or multiple measurements may be taken within an individual <em>and</em> these values are expected to vary (i.e., nested design; <code>agree_nest</code>).</p>
<p>The confidence limits on the limits of agreement are based on the “MOVER” method described in detail by <span class="citation">Zou (2011)</span>. However, both functions operate similarly to <code>agree_test</code>; the only difference being that the data has to be provided as a <code>data.frame</code> in R.</p>
<div id="agree_reps" class="section level2">
<h2 class="hasAnchor">
<a href="#agree_reps" class="anchor"></a><code>agree_reps</code>
</h2>
<p>This function is for cases where the underlying values do <em>not</em> vary within subjects. This can be considered cases where replicate measure may be taken. For example, a researcher may want to compare the performance of two ELISA assays where measurements are taken in duplicate/triplicate.</p>
<p>So, for this function you will have to provide the data frame object with the <code>data</code> argument and the names of the columns containing the first (<code>x</code> argument) and second (<code>y</code> argument) must then be provided. An additional column indicating the subject identifier (<code>id</code>) must also be provided. Again, if there is a hypothesized agreement limit then this could be provided with the <code>delta</code> argument.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a2</span> <span class="op">=</span> <span class="fu"><a href="../reference/agree_reps.html">agree_reps</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>,
                y <span class="op">=</span> <span class="st">"y"</span>,
                id <span class="op">=</span> <span class="st">"id"</span>,
                data <span class="op">=</span> <span class="va">reps</span>,
                agree.level <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></code></pre></div>
<p>The results can then be printed. The printing format is very similar to <code>agree_test</code>, but notice that 1) the hypothesis test is based on the limits of agreement (MOVER method), 2) the Concordance Correlation Coefficient is calculated via the U-statistics method, 3) the Shieh TOST results are missing because they cannot be estimated for this type of design.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a2</span><span class="op">)</span>
<span class="co">#&gt; Limit of Agreement = 80%</span>
<span class="co">#&gt; alpha = 0.05 | 95 % Confidence Interval</span>
<span class="co">#&gt; Replicate Data Points (true value does not vary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Hypothesis Test: No Hypothesis Test</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Bland-Altman Limits of Agreement (LoA) -###</span>
<span class="co">#&gt; Mean Bias: 0.7152083 [-0.6667193, 2.097136]</span>
<span class="co">#&gt; Lower LoA: -1.211694 [-6.249489, 0.3401676]</span>
<span class="co">#&gt; Upper LoA: 2.642111 [1.090249, 7.679905]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Concordance Correlation Coefficient* (CCC) -###</span>
<span class="co">#&gt; CCC: 0.1069, 95% C.I. [-0.1596, 0.3588]</span>
<span class="co">#&gt; *Estimated via U-statistics</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a2</span>, type <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a2</span>, type <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-7-2.png" width="576"></p>
</div>
<div id="agree_nest" class="section level2">
<h2 class="hasAnchor">
<a href="#agree_nest" class="anchor"></a><code>agree_nest</code>
</h2>
<p>This function is for cases where the underlying values may vary within subjects. This can be considered cases where there are distinct pairs of data wherein data is collected in different times/conditions within each subject. An example would be measuring blood pressure on two different devices on many people at different time points/days.</p>
<p>The function works almost identically to <code>agree_reps</code> but the underlying calculations are different</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a3</span> <span class="op">=</span> <span class="fu"><a href="../reference/agree_nest.html">agree_nest</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>,
                y <span class="op">=</span> <span class="st">"y"</span>,
                id <span class="op">=</span> <span class="st">"id"</span>,
                data <span class="op">=</span> <span class="va">reps</span>,
                agree.level <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></code></pre></div>
<p>The printed results (and plots) are very similar to <code>agree_reps</code>. However, the CCC result now has a warning because the calculation in this scenario may not be entirely appropriate given the nature of the data.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a3</span><span class="op">)</span>
<span class="co">#&gt; Limit of Agreement = 80%</span>
<span class="co">#&gt; alpha = 0.05 | 95 % Confidence Interval</span>
<span class="co">#&gt; Nested Data Points (true value may vary)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Hypothesis Test: No Hypothesis Test</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Bland-Altman Limits of Agreement (LoA) -###</span>
<span class="co">#&gt; Mean Bias: 0.7100833 [-0.6824145, 2.102581]</span>
<span class="co">#&gt; Lower LoA: -1.162636 [-6.286604, 0.4204924]</span>
<span class="co">#&gt; Upper LoA: 2.582803 [0.9996742, 7.706771]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ###- Concordance Correlation Coefficient (CCC) -###</span>
<span class="co">#&gt; CCC: 0.4791, 95% C.I. [0.2429, 0.6616]</span>
<span class="co">#&gt; *Estimated via U-statistics; may be biased</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a3</span>, type <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">a3</span>, type <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-10-2.png" width="576"> ### Calcuations for <code>agree_reps</code> &amp; <code>agree_nest</code></p>
<p>All the calculations for the limits of agreement in these two functions can be found in the article by <span class="citation">Zou (2011)</span>.</p>
<p>In addition, the CCC calculations are derived from the <code>cccUst</code> function of the <code>cccrm</code> R package. The mathematics for this CCC calculation can be found in the work of <span class="citation">King, Chinchilli, and Carrasco (2007)</span> and <span class="citation">Carrasco, King, and Chinchilli (2009)</span>.</p>
</div>
</div>
<div id="advanced-agreement" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-agreement" class="anchor"></a>Advanced Agreement</h1>
<p>In some cases, the agreement calculations involve comparing two methods within individuals within varying conditions. For example, the “recpre_long” data set within this package contains two measurements of rectal temperature in 3 different conditions (where there is a fixed effect of condition). For this particular case we can use bootstrapping to estimate the limits of agreement.</p>
<p>The <code>loa_mixed</code> function can then calculate the limits of agreement. Like the previous functions, the data set must be set with the <code>data</code> argument. The <code>diff</code> is the column which contains the difference between the two measurements. The <code>condition</code> is the column that indicates the different conditions that the measurements were taken within. The <code>id</code> is the column containing the subject/participant identifier. The <code>plot.xaxis</code>, if utilized, sets the column from which to plot the data on the x-axis. The final two arguments <code>replicates</code> and <code>type</code> set the requirements for the bootstrapping procedure. <strong>Warning</strong>: This is a computationally heavy procedure and may take a few minutes to complete. An example code can be seen below.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">a4</span> <span class="op">=</span> <span class="fu"><a href="../reference/loa_mixed.html">loa_mixed</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">recpre_long</span>,
               diff <span class="op">=</span> <span class="st">"diff"</span>,
               condition <span class="op">=</span> <span class="st">"trial_condition"</span>,
               id <span class="op">=</span> <span class="st">"id"</span>,
               plot.xaxis <span class="op">=</span> <span class="st">"AM"</span>,
               replicates <span class="op">=</span> <span class="fl">199</span>,
               type <span class="op">=</span> <span class="st">"perc"</span><span class="op">)</span></code></pre></div>
</div>
<div id="test-retest-reliability" class="section level1">
<h1 class="hasAnchor">
<a href="#test-retest-reliability" class="anchor"></a>Test-Retest Reliability</h1>
<p>Another feature of this R package is the ability to estimate the reliability of a measurement. This R package allows for the calculation of Intraclass Correlation Coefficients (ICC), various standard errors (SEM, SEE, and SEP), and coefficient of variation. All of the underlying calculations (sans the coefficient of variation) is based on the paper by <span class="citation">Weir (2005)</span>. This is a fairly popular paper within my own field (kinesiology), and hence was the inspiration for creating this function that provides all the calculative approaches included within that manuscript.</p>
<p>For this package, the test-retest reliability statistics can be calculated with the <code>reli_stats</code> function. This function allow for data to be input in a long (multiple rows of data for each subject) or in wide (one row for each subject but a column for each item/measure).</p>
<p>For the long data form, the column containing the subject identifier (<code>id</code>), item number (<code>item</code>), and measurements (<code>measure</code>) are provided. In this function I refer to items similar to if we were measuring internal consistency for a questionnaire (which is just a special case of test-retest reliability). So, <code>item</code> could also be refer to time points, which is what is typically seen in human performance settings where test-retest reliability may be evaluated over the course of repeated visits to the same laboratory. If <code>wide</code> is set to <code>TRUE</code> then the columns containing the measurements are provided (e.g., <code><a href="https://rdrr.io/r/base/c.html">c("value1","value2","value3")</a></code>).</p>
<p>To demonstrate the function, I will create a data set in the wide format.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">9</span>,    <span class="fl">2</span>,   <span class="fl">5</span>,    <span class="fl">8</span>,
      <span class="fl">6</span>,    <span class="fl">1</span>,   <span class="fl">3</span>,    <span class="fl">2</span>,
      <span class="fl">8</span>,    <span class="fl">4</span>,   <span class="fl">6</span>,    <span class="fl">8</span>,
      <span class="fl">7</span>,    <span class="fl">1</span>,   <span class="fl">2</span>,    <span class="fl">6</span>,
      <span class="fl">10</span>,   <span class="fl">5</span>,   <span class="fl">6</span>,    <span class="fl">9</span>,
      <span class="fl">6</span>,   <span class="fl">2</span>,   <span class="fl">4</span>,    <span class="fl">7</span><span class="op">)</span>,
    ncol <span class="op">=</span> <span class="fl">4</span>,
    byrow <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span>

  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">sf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"J"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">sf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"S"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>
  <span class="co">#sf  #example from Shrout and Fleiss (1979)</span>
  <span class="va">dat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">sf</span><span class="op">)</span></code></pre></div>
<p>Now, that we have a data set (<code>dat</code>), I can use it in the <code>reli_stats</code> function.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test1</span> <span class="op">=</span> <span class="fu"><a href="../reference/reli_stats.html">reli_stats</a></span><span class="op">(</span>
  data <span class="op">=</span> <span class="va">dat</span>,
  wide <span class="op">=</span> <span class="cn">TRUE</span>,
  col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"J1"</span>, <span class="st">"J2"</span>, <span class="st">"J3"</span>, <span class="st">"J4"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>This function also has generic print and plot functions. The output from print provides the coefficient of variation, standard errors, and a table of various intraclass correlation coefficients. Notice the conclusions about the reliability of the measurement here would vary greatly based on the statistic being reported. What statistic you should report is beyond the current vignette, but is heavily detailed in <span class="citation">Weir (2005)</span>. However, within the table there are columns for <code>model</code> and <code>measures</code> which describe the model that is being used and the what these different ICCs are intended to measure, respectively.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">test1</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficient of Variation (%):  15.36</span>
<span class="co">#&gt; Standard Error of Measurement (SEM):  1.0097</span>
<span class="co">#&gt; Standard Error of the Estimate (SEE):  2.6245</span>
<span class="co">#&gt; Standard Error of Prediction (SEP):  4.065</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Intraclass Correlation Coefficients</span>
<span class="co">#&gt;            model         measures  type    icc lower.ci upper.ci</span>
<span class="co">#&gt; 1 one-way random        Agreement  ICC1 0.1657 -0.09672   0.6434</span>
<span class="co">#&gt; 2 two-way random        Agreement  ICC2 0.2898  0.04290   0.6911</span>
<span class="co">#&gt; 3  two-way fixed      Consistency  ICC3 0.7148  0.41184   0.9258</span>
<span class="co">#&gt; 4 one-way random   Avg. Agreement ICC1k 0.4428 -0.54504   0.8783</span>
<span class="co">#&gt; 5 two-way random   Avg. Agreement ICC2k 0.6201  0.15204   0.8995</span>
<span class="co">#&gt; 6  two-way fixed Avg. Consistency ICC3k 0.9093  0.73690   0.9804</span></code></pre></div>
<p>Also included in the results is a plot of the measurements across the items (e.g., time points).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">test1</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-15-1.png" width="576"></p>
</div>
<div id="power-analysis-for-agreement" class="section level1">
<h1 class="hasAnchor">
<a href="#power-analysis-for-agreement" class="anchor"></a>Power Analysis for Agreement</h1>
<p>There are surprisingly few resources for planning a study that attempts to quantify agreement between two methods. Therefore, we have added one function, with hopefully more in the future, to aid in the power analysis for simple agreement studies. The current function is <code>blandPowerCurve</code> which constructs a “curve” of power across sample sizes, agreement levels, and confidence levels. This is based on the work of <span class="citation">Lu et al. (2016)</span>.</p>
<p>For this function the user must define the hypothesized limits of agreement (<code>delta</code>), mean difference between methods (<code>mu</code>), and the standard deviation of the difference scores (<code>SD</code>). There is also the option of adjusting the range of sample size (default: <code><a href="https://rdrr.io/r/base/seq.html">seq(10,100,1)</a></code> which is 10 to 100 by 1), the agreement level (default is 95%), and confidence level (default is 95%). The function then produces a data frame of the results. A quick look at the head and we can see that we have low statistical power when the sample size is at the lower end of the range.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">power_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blandPowerCurve.html">blandPowerCurve</a></span><span class="op">(</span>
  samplesizes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1</span><span class="op">)</span>,
  mu <span class="op">=</span> <span class="fl">0.5</span>,
  SD <span class="op">=</span> <span class="fl">2.5</span>,
  delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span>,
  conf.level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.90</span>,<span class="fl">.95</span><span class="op">)</span>,
  agree.level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.8</span>,<span class="fl">.9</span><span class="op">)</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">power_res</span><span class="op">)</span>
<span class="co">#&gt;    N  mu  SD delta     power agree.level conf.level</span>
<span class="co">#&gt; 1 10 0.5 2.5     6 0.4870252         0.8        0.9</span>
<span class="co">#&gt; 2 11 0.5 2.5     6 0.5624800         0.8        0.9</span>
<span class="co">#&gt; 3 12 0.5 2.5     6 0.6262736         0.8        0.9</span>
<span class="co">#&gt; 4 13 0.5 2.5     6 0.6802613         0.8        0.9</span>
<span class="co">#&gt; 5 14 0.5 2.5     6 0.7260286         0.8        0.9</span>
<span class="co">#&gt; 6 15 0.5 2.5     6 0.7649104         0.8        0.9</span></code></pre></div>
<p>We can then find the sample size at which (or closest to which) a desired power level with the <code>find_n</code> method for <code>powerCurve</code> objects created with the function above.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/powerCurve-methods.html">find_n</a></span><span class="op">(</span><span class="va">power_res</span>, power <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 8 x 5</span>
<span class="co">#&gt;   delta conf.level agree.level power     N</span>
<span class="co">#&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     6       0.9          0.8 0.798    16</span>
<span class="co">#&gt; 2     6       0.9          0.9 0.802    50</span>
<span class="co">#&gt; 3     6       0.95         0.8 0.798    20</span>
<span class="co">#&gt; 4     6       0.95         0.9 0.802    63</span>
<span class="co">#&gt; 5     7       0.9          0.8 0.847    10</span>
<span class="co">#&gt; 6     7       0.9          0.9 0.800    19</span>
<span class="co">#&gt; 7     7       0.95         0.8 0.775    11</span>
<span class="co">#&gt; 8     7       0.95         0.9 0.806    24</span></code></pre></div>
<p>Additionally we can plot the power curve to see how power changes over different levels of <code>delta</code>, <code>agree.level</code>, and <code>conf.level</code></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">power_res</span><span class="op">)</span></code></pre></div>
<p><img src="intro_vignette_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-bland1986">
<p>Bland, J. Martin, and DouglasG. Altman. 1986. “STATISTICAL METHODS FOR ASSESSING AGREEMENT BETWEEN TWO METHODS OF CLINICAL MEASUREMENT.” <em>The Lancet</em> 327 (8476): 307–10. <a href="https://doi.org/10.1016/s0140-6736(86)90837-8">https://doi.org/10.1016/s0140-6736(86)90837-8</a>.</p>
</div>
<div id="ref-bland1999">
<p>Bland, J Martin, and Douglas G Altman. 1999. “Measuring Agreement in Method Comparison Studies.” <em>Statistical Methods in Medical Research</em> 8 (2): 135–60. <a href="https://doi.org/10.1177/096228029900800204">https://doi.org/10.1177/096228029900800204</a>.</p>
</div>
<div id="ref-carrasco2009">
<p>Carrasco, Josep L., Tonya S. King, and Vernon M. Chinchilli. 2009. “The Concordance Correlation Coefficient for Repeated Measures Estimated by Variance Components.” <em>Journal of Biopharmaceutical Statistics</em> 19 (1): 90–105. <a href="https://doi.org/10.1080/10543400802527890">https://doi.org/10.1080/10543400802527890</a>.</p>
</div>
<div id="ref-king2007">
<p>King, Tonya S., Vernon M. Chinchilli, and Josep L. Carrasco. 2007. “A Repeated Measures Concordance Correlation Coefficient.” <em>Statistics in Medicine</em> 26 (16): 3095–3113. <a href="https://doi.org/10.1002/sim.2778">https://doi.org/10.1002/sim.2778</a>.</p>
</div>
<div id="ref-lin1989">
<p>Lin, Lawrence I-Kuei. 1989. “A Concordance Correlation Coefficient to Evaluate Reproducibility.” <em>Biometrics</em> 45 (1): 255. <a href="https://doi.org/10.2307/2532051">https://doi.org/10.2307/2532051</a>.</p>
</div>
<div id="ref-lu2016">
<p>Lu, Meng-Jie, Wei-Hua Zhong, Yu-Xiu Liu, Hua-Zhang Miao, Yong-Chang Li, and Mu-Huo Ji. 2016. “Sample Size for Assessing Agreement Between Two Methods of Measurement by Bland-Altman Method.” <em>The International Journal of Biostatistics</em> 12 (2). <a href="https://doi.org/10.1515/ijb-2015-0039">https://doi.org/10.1515/ijb-2015-0039</a>.</p>
</div>
<div id="ref-shieh2019">
<p>Shieh, Gwowen. 2019. “Assessing Agreement Between Two Methods of Quantitative Measurements: Exact Test Procedure and Sample Size Calculation.” <em>Statistics in Biopharmaceutical Research</em> 12 (3): 352–59. <a href="https://doi.org/10.1080/19466315.2019.1677495">https://doi.org/10.1080/19466315.2019.1677495</a>.</p>
</div>
<div id="ref-weir2005">
<p>Weir, Joseph P. 2005. “Quantifying Test-Retest Reliability Using the Intraclass Correlation Coefficient and the SEM.” <em>The Journal of Strength and Conditioning Research</em> 19 (1): 231. <a href="https://doi.org/10.1519/15184.1">https://doi.org/10.1519/15184.1</a>.</p>
</div>
<div id="ref-zou2011">
<p>Zou, GY. 2011. “Confidence Interval Estimation for the BlandAltman Limits of Agreement with Multiple Observations Per Individual.” <em>Statistical Methods in Medical Research</em> 22 (6): 630–42. <a href="https://doi.org/10.1177/0962280211402548">https://doi.org/10.1177/0962280211402548</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Aaron Caldwell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
