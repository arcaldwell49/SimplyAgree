<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Tolerance Limits from an Agreement Study — tolerance_limit • SimplyAgree</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Tolerance Limits from an Agreement Study — tolerance_limit"><meta property="og:description" content="
A function for calculating tolerance limits for the difference between two measurements (difference = x-y).
This is a procedure that should produce results similar to the Bland-Altman limits of agreement.
See vignettes for more details."><meta property="og:image" content="/images/sticker.png"><meta property="og:image:alt" content="SimplyAgree logo"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@exphysstudent"><meta name="twitter:site" content="@exphysstudent"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SimplyAgree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/agreement_analysis.html">Agreement &amp; Tolerance Limits</a>
    </li>
    <li>
      <a href="../articles/agree_tests.html">Agreement Tests</a>
    </li>
    <li>
      <a href="../articles/Deming.html">Deming Regression</a>
    </li>
    <li>
      <a href="../articles/reanalysis.html">Re-analysis of an Agreement Study</a>
    </li>
    <li>
      <a href="../articles/reliability_analysis.html">Reliability Analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tolerance Limits from an Agreement Study</h1>
    
    <div class="hidden name"><code>tolerance_limit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="figures/lifecycle-maturing.svg" alt="[Maturing]"></a></p>
<p>A function for calculating tolerance limits for the difference between two measurements (difference = x-y).
This is a procedure that should produce results similar to the Bland-Altman limits of agreement.
See vignettes for more details.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tolerance_limit</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  tol_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  tol_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"approx"</span>, <span class="st">"perc"</span><span class="op">)</span>,</span>
<span>  prop_bias <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  log_tf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cor_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sym"</span>, <span class="st">"car1"</span>, <span class="st">"ar1"</span>, <span class="st">"none"</span><span class="op">)</span>,</span>
<span>  correlation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_model <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  replicates <span class="op">=</span> <span class="fl">999</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A data frame containing the variables.</p></dd>


<dt>x</dt>
<dd><p>Name of the column for the first measurement.</p></dd>


<dt>y</dt>
<dd><p>Name of the column for the second measurement.</p></dd>


<dt>id</dt>
<dd><p>Name of the column for the subject ID.</p></dd>


<dt>condition</dt>
<dd><p>Name of the column indicating different conditions subjects were tested under. This can be left missing if there are no differing conditions to be tested.</p></dd>


<dt>time</dt>
<dd><p>Name of the column indicating the time points. Only necessary if the data is from time series or repeated measures collection.</p></dd>


<dt>pred_level</dt>
<dd><p>Prediction level for the prediction interval. Default is 95%.</p></dd>


<dt>tol_level</dt>
<dd><p>Tolerance level for the tolerance limit (i.e., the CI of the prediction limit). Default is 95%.</p></dd>


<dt>tol_method</dt>
<dd><p>Method for calculating the tolerance interval. Options are "approx" for a chi-square based approximation and "perc" for a parametric percentile bootstrap method.</p></dd>


<dt>prop_bias</dt>
<dd><p>Whether to include a proportional bias term in the model. Determines whether proportional bias should be considered for the prediction/tolerance limits calculations.</p></dd>


<dt>log_tf</dt>
<dd><p>Calculate limits of agreement using log-transformed data.</p></dd>


<dt>cor_type</dt>
<dd><p>The type of correlation structure. "sym" is for Compound Symmetry, "car1" is for continuous autocorrelation structure of order 1, or "ar1" for autocorrelation structure of order 1.</p></dd>


<dt>correlation</dt>
<dd><p>an optional corStruct object describing the within-group correlation structure that overrides the default setting. See the documentation of corClasses for a description of the available corStruct classes. If a grouping variable is to be used, it must be specified in the form argument to the corStruct constructor. Defaults to NULL.</p></dd>


<dt>weights</dt>
<dd><p>an optional varFunc object or one-sided formula describing the within-group heteroskedasticity structure that overrides the default setting. If given as a formula, it is used as the argument to varFixed, corresponding to fixed variance weights. See the documentation on varClasses for a description of the available varFunc classes.</p></dd>


<dt>keep_model</dt>
<dd><p>Logical indicator to retain the GLS model. Useful when working with large data and the model is very large.</p></dd>


<dt>replicates</dt>
<dd><p>The number of bootstrap replicates. Passed on to the boot function. Default is 999.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns single <code>tolerance_delta</code> class object with the results of the agreement analysis with a prediction interval and tolerance limits.</p><ul><li><p><code>limits</code>: A data frame containing the prediction/tolerance limits.</p></li>
<li><p><code>model</code>: The GLS model; NULL if keep_model set to FALSE.</p></li>
<li><p><code>call</code>: The matched call.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The tolerance limits calculated in this function are based on the papers by Francq &amp; Govaerts (2016), Francq, et al. (2019), and Francq, et al. (2020).
When <code>tol_method</code> is set to "approx", the tolerance limits are calculated using the approximation detailed in Francq et al. (2020).
However, these are only an approximation and conservative.
Therefore, as suggested by Francq, et al. (2019), a parametric bootstrap approach can be utilized to calculate percentile tolerance limits (<code>tol_method = "perc"</code>).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Francq, B. G., &amp; Govaerts, B. (2016). How to regress and predict in a Bland–Altman plot? Review and contribution based on tolerance intervals and correlated‐errors‐in‐variables models. Statistics in mMdicine, 35(14), 2328-2358.</p>
<p>Francq, B. G., Lin, D., &amp; Hoyer, W. (2019). Confidence, prediction, and tolerance in linear mixed models. Statistics in Medicine, 38(30), 5603-5622.</p>
<p>Francq, B. G., Berger, M., &amp; Boachie, C. (2020). To tolerate or to agree: A tutorial on tolerance intervals in method comparison studies with BivRegBLS R Package. Statistics in Medicine, 39(28), 4334-4349.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'reps'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simple</span></span></span>
<span class="r-in"><span><span class="fu">tolerance_limit</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>, y <span class="op">=</span><span class="st">"y"</span>, data <span class="op">=</span> <span class="va">reps</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Agreement between Measures (Difference: x-y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% Prediction Interval with 95% Tolerance Limits</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Bias           Bias CI Prediction Interval Tolerance Limits</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.4383 [-0.1669, 1.0436]   [-2.1998, 3.0764] [-2.993, 3.8697]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Nested</span></span></span>
<span class="r-in"><span><span class="fu">tolerance_limit</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>, y <span class="op">=</span><span class="st">"y"</span>, data <span class="op">=</span> <span class="va">reps</span>, id <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Agreement between Measures (Difference: x-y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95% Prediction Interval with 95% Tolerance Limits</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Bias           Bias CI Prediction Interval   Tolerance Limits</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.7046 [-1.5571, 2.9663]   [-4.4686, 5.8778] [-8.6099, 10.0191]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Aaron Caldwell.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

